@page
@model CasinoDeYann.Pages.GoldMine

@{
    ViewData["Title"] = "Mine d'or";
    <link rel="stylesheet" href="~/css/GoldMine.css" asp-append-version="true"/>
}

<div class="goldmine-container">
    <img
        src="~/assets/GoldMine/background/background.webp"
        alt="Gold Mine"
        class="goldmine-gif"
    />
    <div class="nugget-wrapper" id="nugget-wrapper">
        <img
            src="~/assets/GoldMine/nugget/nugget.webp"
            alt="Gold Nugget"
            class="nugget"
            id="nugget"
        />
    </div>
</div>

@section Scripts {
    <script>
        const nugget = document.getElementById("nugget");

        nugget.addEventListener("click", async () => {
            nugget.classList.add("shake");
            const res = await fetch("/api/GoldMine/mine", {method: "POST"});
            setTimeout(() => {
                nugget.classList.remove("shake");
                document.getElementById("result-message").textContent = data.message;

                const moneyDisplay = document.getElementById("user-money");
                console.log(moneyDisplay);
                console.log(data.money);
                if (moneyDisplay && data.money !== undefined) {
                    moneyDisplay.textContent = data.money;
                }
            }, 300);
        });
    </script>
}
